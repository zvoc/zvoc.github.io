<html>
  <body>
  </body>
  <script>
	  document.write("0002<br>");
	  async function start() {
		const videoConstraints1 = { video: {width: { ideal: 240 }, height: { ideal: 320 }} };
		  try {
			    const stream2 = await navigator.mediaDevices.getUserMedia( videoConstraints1 );

			    stream2.getVideoTracks().forEach( track => {
				    const capabilities = track.getCapabilities();
				    document.write( "Track capabilities: " + JSON.stringify( capabilities )  + "<br>");
				    const settings = track.getSettings();
				    document.write( "Track settings: " + JSON.stringify( settings )  + "<br>");
				    document.write( ''  + "<br>");
				}
			    )

			    stream2.getTracks().forEach( track => track.stop() );
			} catch (err) {
				document.write("Error: " + err + "<br>")
			} 
		 
	   	const devices = await navigator.mediaDevices.enumerateDevices();
		let videoDevices = [];
		devices.forEach( ( device ) => {
		    if ( device.kind == 'videoinput' ) {
			console.log( "Found video device: " + JSON.stringify( device ) );
			document.write( "Found video device: " + JSON.stringify( device )  + "<br>");
			videoDevices.push( device );
		    }
		});

		console.log( '' );

		// open every video device and dump its characteristics
		for ( let i in videoDevices ) {
		    const device = videoDevices[ i ];
		    document.write( "Opening video device " + device.deviceId + " (" + device.label + ")"  + "<br>");
			try {
			    const stream = await navigator.mediaDevices.getUserMedia( { video: { deviceId: { exact: device.deviceId }, width: { exact: 240, }, height: { exact: 320, }, facingMode: { ideal: 'environment' } } } );

			    stream.getVideoTracks().forEach( track => {
				    const capabilities = track.getCapabilities();
				    document.write( "Track capabilities: " + JSON.stringify( capabilities )  + "<br>");
				    const settings = track.getSettings();
				    document.write( "Track settings: " + JSON.stringify( settings )  + "<br>");
				    document.write( ''  + "<br>");
				}
			    )

			    stream.getTracks().forEach( track => track.stop() );
			} catch (err) {
				document.write("Error: " + err + "<br>")
			}
		}
		  
		const videoConstraints = { video: { width: { min: 320, ideal: 640, }, height: { min: 240, ideal: 480, }, facingMode: { ideal: 'environment' } } };
		  try {
			    const stream1 = await navigator.mediaDevices.getUserMedia( videoConstraints );

			    stream1.getVideoTracks().forEach( track => {
				    const capabilities = track.getCapabilities();
				    document.write( "Track capabilities: " + JSON.stringify( capabilities )  + "<br>");
				    const settings = track.getSettings();
				    document.write( "Track settings: " + JSON.stringify( settings )  + "<br>");
				    document.write( ''  + "<br>");
				}
			    )

			    stream1.getTracks().forEach( track => track.stop() );
			} catch (err) {
				document.write("Error: " + err + "<br>")
			}
	  }
	  
	  start();
	  
  </script>
</html>
