<html>
  <body>
  </body>
  <script>
	  var constraints = {
	  	video: true
	  };
	  navigator.mediaDevices.getUserMedia(constraints).then(() =>
		navigator
			.mediaDevices
  			.enumerateDevices()
  			.then(
				devices => devices.forEach(
					device => {
						document.write(JSON.stringify(device));
						document.write("<br>");
						if (device.kind == "videoinput") {
							var c = {
								video: {
									exact: device.deviceId
								}
							};
							console.log( "Opening video device " + device.deviceId + " (" + device.label + ")" );
							document.write("Opening video device " + device.deviceId + " (" + device.label + ")");
						    var stream = await navigator.mediaDevices.getUserMedia( { video: { deviceId: { exact: device.deviceId } } } );
						    stream.getVideoTracks().forEach( track => {
							    const capabilities = track.getCapabilities();
							    console.log( "Track capabilities: " + JSON.stringify( capabilities ) );
							    document.write( "Track capabilities: " + JSON.stringify( capabilities ) );
							    const settings = track.getSettings();
							    console.log( "Track settings: " + JSON.stringify( settings ) );
							    document.write( "Track settings: " + JSON.stringify( settings ) );
							    console.log( '' );
							}
						    )

						    stream.getTracks().forEach( track => track.stop() );
							navigator.mediaDevices.getUserMedia(c).then(
								() => document.write("SUCCESS<br>")
							).catch((error) => 
							    document.write("Error: " + error)
							);
						}
					}
				)
			  )
		);
	  
	  var videoConstraints = { video: { width: { min: 240, ideal: 480, }, height: { min: 320, ideal: 640, }, facingMode: { ideal: 'environment' } } };
	  
	navigator.mediaDevices.getUserMedia(videoConstraints).then(
		() => document.write("SUCCESS1<br>")
	).catch((error) => 
	    document.write("Error1: " + error)
	);
	  
  </script>
</html>
